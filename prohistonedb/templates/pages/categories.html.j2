{% extends 'layouts/base.html.j2' %}

{% macro category_path(id) %}{{"contents/" + (categories[id|int].name | lower) + ".html"}}{% endmacro %}

{% block title %} {{siteName}} | Categories{% endblock title %}

{% block skylign %}
    <script src="{{ url_for('static', filename = 'assets/js/custom/jquery-3.7.0.min.js' )}}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename = 'assets/js/custom/scroller.js' )}}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename = 'assets/js/custom/hmm_logo.bundle.js' )}}" type="text/javascript"></script>
    <link href="{{ url_for('static', filename = 'assets/css/hmm_logo.min.css' )}}" rel="stylesheet">
{% endblock skylign %}

{% block body %} class="categories fluid-bg" {% endblock body %}

{% block header %}

{% include 'includes/navigation_search.html.j2' %}

{% endblock header %}

{% block content %}

  <header>
    <div class="page-header pb-5">
      <div class="container">

        <div class="container mt-7">
          <div class="row">
            <div class="col-12">
              <h2 class="text-white pt-3">Histone categories</h2>
            </div>
          </div>
        </div>
      </div>

    </div>
  </header>
  
 <div class="card card-body mx-3 mx-md-4">
    <section class="my-3">
      <div class="container my-3">
        <div class="row">
          <div class="col-lg-3"></div>
          <div class="col-lg-9">
            <div class="row">
                {% if id is defined %}
                  {% include category_path(id) %}
                {% else %}
                  {% include "contents/categories overview.html" %}
                  <h3>2d cluster representation of ProHistone database</h3>
                  <div class="col-md-12 text-center">
                    <img src="{{url_for('static', filename = 'assets/img/2d_clusters.png')}}" class="col-md-9">
                  </div>
                {% endif %}
              </div>
          </div>
        </div>

        {# * Skylign sequence alignment viewer #}
        {% if id is defined %}
          {% if categories[id|int].name != 'Undefined' %}
          <div class="row my-5">
            <div class="col-lg-3">
                <h3>{{categories[id|int].name}} sequence alignment</h3>
            </div>
            <div class="col-lg-9">
                <div class="row mt-3">
                    <div class="w-100">
                        <div id="logo-container" class="logo mx-auto w-100" data-logo=""></div>
                        <div id="logo_info"></div>
                    </div>
                </div>
            </div>
          </div>
          {% endif %}
        {% endif %}
      </div>
    </section>
  </div>
  {% endblock content %}

  {% block javascripts %}
    {% if id is defined %}
      {% if categories[id|int].name != 'Undefined' %}
          <script>
              const HMMJSONurl = '{{url_for('static', filename=(categories[id|int].static_logo_path | string))}}';
          </script>
          <script src="{{ url_for('static', filename = 'assets/js/custom/skylign.js' )}}" type="text/javascript"></script>
      {% endif %}
    {% endif %}
  {% endblock javascripts %}